<html>
    <head>
        <title>
            Hello
        </title>
        <script>
            function update(selection) {
                let divElement = document.getElementById('dox');
                divElement.setAttribute('data', selection);
                console.log("The selected view is " + divElement.getAttribute('data'));
            }
            function populateMenu(menu){
                console.log(menu); 
                const select = document.getElementById('myselect');
                Object.entries(menu).forEach(entry => {
                    const [key, value] = entry;
                    console.log(key, value);
                    let option = document.createElement("option");
                    option.setAttribute("value", value);
                    option.insertAdjacentText("afterbegin", key);
                    select.appendChild(option);
                    }
                )
            }

            function loadMenu(){
                fetch("http://localhost:8081/contents")
                    .then((response) => response.json())
                    .then((json) => populateMenu(json));
            }
            loadMenu();
        </script>
    </head>
    <body>
        <form>
            <select name="myselect" id="myselect" onChange="update(this.value)">
                <option value="sub-0.html">Option 0</option>
                <option value="sub-1.html">Option 1</option>
                <option value="sub-2.html">Option 2</option>
            </select>
        </form>
        <div> 
            <object id="dox" type="text/html" data="sub-0.html">
            </object>
        </div>
    </body>
</html>

